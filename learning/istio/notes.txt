helm install istio-base 
helm install istio-cni 
helm install istiod
helm install istio-gateway

now test using manifest
use simple virtual service 

while true; do curl http://first-app.web:8080/api/devices && echo "" && sleep 1; done
while true; do curl http://helloworldmeet.example:30385/api/devices && echo "" && sleep 1 ; done

http://helloworldmeet.example:30385/api/devices
https://helloworldmeet.example:32211/api/devices

https://istio.io/latest/docs/reference/config/networking/destination-rule/
https://www.youtube.com/watch?v=H4YIKwAQMKk
https://istio.io/latest/docs/reference/config/networking/virtual-service/

-----------

install istioctl 
install all istio components 

install kubernetes api gateway
kubectl get crd gateways.gateway.networking.k8s.io &> /dev/null || \
  { kubectl kustomize "github.com/kubernetes-sigs/gateway-api/config/crd?ref=v1.1.0" | kubectl apply -f -; }

install sample app 

kubectl apply -f samples/bookinfo/platform/kube/bookinfo.yaml

# kubernetes api gateway 
kubectl apply -f samples/bookinfo/gateway-api/bookinfo-gateway.yaml

# gateway and virtual service

https://istio.io/latest/docs/examples/bookinfo/



istioctl uninstall --purge
